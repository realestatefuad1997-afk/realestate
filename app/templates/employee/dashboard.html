{% extends 'base.html' %}
{% block title %}{{ _('Employee Dashboard') }}{% endblock %}

{% block content %}

<style>
/* شبكة الكروت */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

/* كرت واحد */
.dashboard-card {
  background-color: #fff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}
.dashboard-card:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

/* أيقونة دائرية داخل الكرت */
.dashboard-card i {
  font-size: 2rem;
  padding: 15px;
  border-radius: 50%;
  margin-bottom: 12px;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
.icon-blue { background-color: #0d6efd; }
.icon-green { background-color: #198754; }
.icon-yellow { background-color: #ffc107; color: #000; }
.icon-orange { background-color: #fd7e14; }
.icon-red { background-color: #dc3545; }

/* عنوان الكرت */
.dashboard-card span.title {
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 6px;
}

/* شارات الحالة */
.badge-status {
  font-size: 0.75rem;
  padding: 3px 8px;
  border-radius: 12px;
  margin-top: 4px;
  display: inline-block;
  font-weight: 500;
}
.status-available { background: #198754; color: #fff; }
.status-occupied { background: #ffc107; color: #000; }
.status-maintenance { background: #dc3545; color: #fff; }

/* العنوان الرئيسي */
h3.dashboard-title {
  font-size: 1.8rem;
  font-weight: bold;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}
</style>

<h3 class="dashboard-title"><i class="bi bi-speedometer2"></i>{{ _('Employee Dashboard') }}</h3>

<!-- كروت رئيسية -->
<div class="dashboard-grid">
  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.properties_list') }}'">
    <i class="bi bi-building icon-blue"></i>
    <span class="title">{{ _('Properties') }}</span>
    <span class="badge-status">{{ properties|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.contracts_list') }}'">
    <i class="bi bi-file-text icon-green"></i>
    <span class="title">{{ _('Contracts') }}</span>
    <span class="badge-status">{{ contracts|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.rent_collection_list') }}'">
    <i class="bi bi-cash-coin icon-yellow"></i>
    <span class="title">{{ _('Rent Collection') }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.maintenance_list') }}'">
    <i class="bi bi-tools icon-orange"></i>
    <span class="title">{{ _('Maintenance Requests') }}</span>
    <span class="badge-status">{{ maintenance_requests|length }}</span>
  </div>

  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.complaints_list') }}'">
    <i class="bi bi-exclamation-triangle icon-red"></i>
    <span class="title">{{ _('Complaints') }}</span>
    <span class="badge-status">{{ complaints|length }}</span>
  </div>
</div>

<!-- أحدث العقارات -->
<h5 class="dashboard-title"><i class="bi bi-building"></i>{{ _('Recent Properties') }}</h5>
<div class="dashboard-grid">
  {% for p in properties[:6] %}
  <div class="dashboard-card" onclick="window.location.href='{{ url_for('employee.properties_edit', prop_id=p.id) }}'">
    <i class="bi bi-house-door icon-blue"></i>
    <span class="title">{{ p.title }}</span>
    {% if p.status == 'available' %}
      <span class="badge-status status-available">{{ _('Available') }}</span>
    {% elif p.status == 'occupied' %}
      <span class="badge-status status-occupied">{{ _('Occupied') }}</span>
    {% elif p.status == 'maintenance' %}
      <span class="badge-status status-maintenance">{{ _('Maintenance') }}</span>
    {% else %}
      <span class="badge-status">{{ p.status }}</span>
    {% endif %}
  </div>
  {% else %}
  <div>{{ _('No properties yet') }}</div>
  {% endfor %}
</div>

{% endblock %}
