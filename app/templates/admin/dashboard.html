{% extends 'base.html' %}
{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±{% endblock %}

{% block content %}
<style>
/* ===== Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹Ø§Ù…Ø© ===== */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 18px;
  margin-bottom: 28px;
}

/* ===== ÙƒØ±Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© ===== */
.stat-card {
  border-radius: 18px;
  padding: 20px;
  color: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  text-align: center;
  transition: all 0.3s ease;
}
.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
}

/* ===== Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙƒØ±ÙˆØª ===== */
a.stat-card-link {
  text-decoration: none;
  color: inherit;
}

/* ===== Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ===== */
.stat-card i {
  font-size: 2.5rem;
  margin-bottom: 8px;
  opacity: 0.9;
}

/* ===== Ø§Ù„Ù†ØµÙˆØµ ===== */
.stat-card span {
  font-weight: 600;
  font-size: 1rem;
}

/* ===== Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ===== */
.bg-income { background: linear-gradient(135deg, #4caf50, #81c784); }
.bg-expense { background: linear-gradient(135deg, #e53935, #ff6f61); }
.bg-profit { background: linear-gradient(135deg, #1e88e5, #64b5f6); }
.bg-house { background: linear-gradient(135deg, #6f42c1, #a56eff); }
.bg-unleased { background: linear-gradient(135deg, #9c27b0, #ce93d8); }
.bg-maint { background: linear-gradient(135deg, #fb8c00, #ffb74d); }
.bg-employee { background: linear-gradient(135deg, #26a69a, #4dd0e1); }
.bg-tenant { background: linear-gradient(135deg, #fbc02d, #ffe082); }
.bg-complaint { background: linear-gradient(135deg, #ab47bc, #ba68c8); }
.bg-light-card { background: #f8f9fa; color: #333; }

.section-title {
  font-size: 1.2rem;
  font-weight: bold;
  color: #6f42c1;
  margin: 25px 0 10px;
}
</style>

<h2 class="mb-4 text-primary">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</h2>

<!-- Ø´Ø¨ÙƒØ© ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
<div class="dashboard-grid">

  <div class="stat-card bg-income">
    <i class="bi bi-cash-stack"></i>
    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</span>
    <span>{{ total_income }} Ø±.Ø¹</span>
  </div>

  <div class="stat-card bg-expense">
    <i class="bi bi-wallet2"></i>
    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</span>
    <span>{{ total_expenses }} Ø±.Ø¹</span>
  </div>

  <div class="stat-card bg-profit">
    <i class="bi bi-graph-up"></i>
    <span>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</span>
    <span>{{ profit }} Ø±.Ø¹</span>
  </div>

  <a href="{{ url_for('employee.properties_list') }}" class="stat-card-link">
    <div class="stat-card bg-house">
      <i class="bi bi-houses"></i>
      <span>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</span>
      <span>{{ properties_count }}</span>
    </div>
  </a>

  <a href="{{ url_for('employee.properties_list', only='unleased') }}" class="stat-card-link">
    <div class="stat-card bg-unleased">
      <i class="bi bi-house-door"></i>
      <span>Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ø¤Ø¬Ø±Ø©</span>
      <span>{{ unleased_properties }}</span>
    </div>
  </a>

  <div class="stat-card bg-maint">
    <i class="bi bi-tools"></i>
    <span>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©</span>
    <span>{{ overdue_maintenance_24h }}</span>
  </div>

  <div class="stat-card bg-employee">
    <i class="bi bi-person-badge"></i>
    <span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
    <span>{{ total_employees }}</span>
  </div>

  <a href="{{ url_for('admin.users_list', role='tenant') }}" class="stat-card-link">
    <div class="stat-card bg-tenant">
      <i class="bi bi-people"></i>
      <span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†</span>
      <span>{{ total_tenants }}</span>
    </div>
  </a>

</div>

<!-- Ø£Ø­Ø¯Ø« Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø§Øª -->
<h5 class="section-title">ğŸ› ï¸ Ø£Ø­Ø¯Ø« Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ ÙˆØ·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©</h5>
<div class="dashboard-grid">

  {% for c in latest_complaints %}
  <div class="stat-card bg-complaint">
    <i class="bi bi-exclamation-triangle"></i>
    <span>{{ c.subject }}</span>
    <span>Ø±Ù‚Ù… #{{ c.id }} - {{ c.status }}</span>
  </div>
  {% else %}
  <div class="stat-card bg-light-card">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´ÙƒØ§ÙˆÙ‰ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
  {% endfor %}

  {% for m in latest_maintenance %}
  <div class="stat-card bg-light-card">
    <i class="bi bi-tools"></i>
    <span>{{ m.title }}</span>
    <span>Ø±Ù‚Ù… #{{ m.id }} - {{ m.status }}</span>
  </div>
  {% else %}
  <div class="stat-card bg-light-card">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØµÙŠØ§Ù†Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>
  {% endfor %}

</div>
{% endblock %}
